<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>{{ document.get_document_type_display }} №{{ document.id }}</title>
    <style>
        @font-face {
            font-family: 'DejaVu Sans';
            src: url('https://github.com/dejavu-fonts/dejavu-fonts/blob/master/ttf/DejaVuSans.ttf?raw=true');
        }
        body { font-family: 'DejaVu Sans', sans-serif; font-size: 12px; }
        h1 { text-align: center; font-size: 18px; }
        .header { margin-bottom: 20px; }
        .header p { margin: 2px 0; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
        .total-row td { font-weight: bold; font-size: 14px; text-align: right; }
    </style>
</head>
<body>
    <h1>{{ document.get_document_type_display }} №{{ document.id }}</h1>
    <div class="header">
        <p><strong>Дата:</strong> {{ document.document_date|date:"d.m.Y H:i" }}</p>
        {% if document.document_type == 'Расход' %}
            <p><strong>Клиент:</strong> {{ transaction.client }}</p>
        {% else %}
            <p><strong>Поставщик:</strong> {{ transaction.supplier }}</p>
        {% endif %}
        <p><strong>Склад:</strong> {{ transaction.warehouse.name }}</p>
    </div>

    <h3>Состав документа:</h3>
    <table>
        <thead>
            <tr>
                <th>Товар</th>
                <th style="text-align: right;">Количество</th>
                <th style="text-align: right;">Цена за ед.</th>
                <th style="text-align: right;">Сумма</th>
            </tr>
        </thead>
        <tbody>
            {% for item in items %}
            <tr>
                <td>{{ item.product.product_name }}</td>
                <td style="text-align: right;">{{ item.quantity }}</td>
                {% if document.document_type == 'Расход' %}
                    <td style="text-align: right;">{{ item.product.selling_price|floatformat:2 }} руб.</td>
                    <td style="text-align: right;">{{ item.line_total_selling|floatformat:2 }} руб.</td>
                {% else %}
                    <td style="text-align: right;">{{ item.product.purchase_price|floatformat:2 }} руб.</td>
                    <td style="text-align: right;">{{ item.line_total_purchase|floatformat:2 }} руб.</td>
                {% endif %}
            </tr>
            {% endfor %}
        </tbody>
        <tfoot>
            <tr class="total-row">
                <td colspan="3">Итоговая сумма:</td>
                <td>{{ transaction.total_amount|floatformat:2 }} руб.</td>
            </tr>
        </tfoot>
    </table>
</body>
</html>
